<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¶„ì„ ê²°ê³¼</title>
    <style>
        body { font-family: sans-serif; margin: 2em; }
        h1 { color: #333; }
        table { width: 100%; border-collapse: collapse; margin-top: 2em; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .group-box { border: 1px solid #ccc; padding: 10px; margin-bottom: 20px; }
        .group-title { font-weight: bold; margin-bottom: 10px; }
        .group-images img { width: 150px; margin: 5px; border: 1px solid #ddd; }
        /* íƒœê·¸ëœ ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ìœ ì‚¬ ì´ë¯¸ì§€ì™€ ë§ì¶¤ */
        .tagged img { width: 150px; margin: 5px; border: 2px solid #5cb85c; }
    </style>
</head>
<body>
    <h1>ğŸ” ë¶„ì„ ê²°ê³¼</h1>

    <h2>ğŸ“· íë¦¼ ì‚¬ì§„</h2>
    {% if results %}
    <table>
        <thead>
            <tr><th>íŒŒì¼ëª…</th><th>íë¦¼ ì—¬ë¶€</th><th>Laplacian ê°’</th></tr>
        </thead>
        <tbody>
            {% for r in results %}
            {% if r.Blur %}
            <tr>
                <td>{{ r.File }}</td>
                <td>íë¦¼</td>
                <td>{{ "%.2f"|format(r.LaplacianVar) }}</td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>íë¦¼ ì‚¬ì§„ ì—†ìŒ</p>
    {% endif %}

    <h2>ğŸ§© ìœ ì‚¬ ì‚¬ì§„ ê·¸ë£¹</h2>
    {% if groups %}
        {% for group in groups %}
        <div class="group-box">
            <div class="group-title">ìœ ì‚¬ ì‚¬ì§„ ê·¸ë£¹ (ê¸°ì¤€: {{ group[0] }})</div>
            <div class="group-images">
                {% for img in group %}
                <img src="{{ url_for('uploaded_source_file', filename=img) }}" alt="{{ img }}">
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    {% else %}
    <p>ìœ ì‚¬ ê·¸ë£¹ ì—†ìŒ</p>
    {% endif %}

    <h2>ğŸ·ï¸ ì–¼êµ´ íƒœê·¸ ê²°ê³¼</h2>
    {% if tagged_images %}
        {% for name, images in tagged_images.items() %}
        <div class="group-box">
            <div class="group-title">ì¸ë¬¼: {{ name }}</div>
            <div class="tagged">
                {% for img in images %}
                <img src="{{ url_for('static', filename='results/' + img) }}" alt="{{ img }}">
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    {% else %}
    <p>íƒœê·¸ëœ ì–¼êµ´ ì´ë¯¸ì§€ ì—†ìŒ</p>
    {% endif %}
</body>
</html>